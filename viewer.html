<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>PDF Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PDF.js v3 viewer CSS -->
  <link rel="stylesheet" href="pdfjs/viewer.css">

  <!-- PDF.js core library -->
  <script src="pdfjs/pdf.js"></script>

  <!-- PDF.js worker -->
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = "pdfjs/pdf.worker.js";
  </script>

  <!-- PDF.js viewer -->
  <script src="pdfjs/viewer.js"></script>

</head>

<body tabindex="1">
  <div id="outerContainer">

    <!-- Sidebar と UI は viewer.js が自動生成するので、ここは空でOK -->
    <div id="sidebarContainer">
      <div id="thumbnailView"></div>
    </div>

    <div id="mainContainer">
      <div id="viewerContainer" tabindex="0">
        <div id="viewer" class="pdfViewer"></div>
      </div>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const file = params.get("file");
    const page = parseInt(params.get("page") || "1");

    if (!file) {
      alert("file パラメータが必要です");
    }

    // PDF をロード
    document.addEventListener("webviewerloaded", () => {
      PDFViewerApplication.open(file);
      PDFViewerApplication.initialBookmark = "page=" + page;
    });
  </script>
</body>
</html>
